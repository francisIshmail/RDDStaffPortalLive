@model RDDStaffPortal.DAL.DataModels.SAP.RDD_CreditLimit

@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_CommonLayout.cshtml";
}

<link href="~/Content/extra-style.css" rel="stylesheet" />
<input type="hidden" id="hdnCLId" />
<style>
    .fs-label-wrap {
        padding: 10px !important;
    }
    .fs-wrap {
        width: 100% !important;
    }
    div#tblShow_filter {
        position: relative;
        right: -31vw;
    }
</style>
<div class="main-panel">
    <div class="container">
        <div class="page-inner">

            <div class="row">
                <div class="col-md-12">
                    <div class="card">
                        <div class="loader1"></div>
                        <div class="card-header">
                            <div class="d-flex align-items-center">
                                <h4 class="card-title redtitle">Temporary Credit Limit </h4>

                            </div>
                        </div>
                        <!-- <form>
        <div class="form-group">
          <label for="exampleInputEmail1">Email address</label>
          <input type="email" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp" placeholder="Enter email">
          <small id="emailHelp" class="form-text text-muted">We'll never share your email with anyone else.</small>
        </div>
        <div class="form-group">
          <label for="exampleInputPassword1">Password</label>
          <input type="password" class="form-control" id="exampleInputPassword1" placeholder="Password">
        </div>
        <div class="form-group form-check">
          <input type="checkbox" class="form-check-input" id="exampleCheck1">
          <label class="form-check-label" for="exampleCheck1">Check me out</label>
        </div>
        <button type="submit" class="btn btn-primary">Submit</button>
      </form> -->
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-12">
                                    <form class="formarea">
                                        <div class="row">
                                            <div class="col-md-12 tpbtmsp">
                                                <div class="col-md-3 p-0">
                                                    <label for="country" class="text-left"><b>Country : </b></label>
                                                    <select id="ddlCountry" name="country" class="form-control"></select>
                                                </div>
                                              
                                            </div>
                                            <div class="col-md-3 tpbtmsp">
                                                <div class="form-group form-grid">
                                                    <label>CA SAP UserName :</label>
                                                    <select id="ddlCAUserName" class="multiselect-ui form-control" multiple="multiple">
                                                        <option value="-1">---Select---</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="col-md-3 tpbtmsp">
                                                <label for="catempcllimit" class="text-left number"><b>CA Temporary CL :</b> </label>
                                                <input type="text" id="catempcllimit" placeholder="">
                                            </div>
                                            <div class="col-md-3 tpbtmsp">
                                                <div class="form-group form-grid">
                                                    <label>CM SAP User Name :</label>
                                                    <select id="ddlCMUserName" class="multiselect-ui form-control" multiple="multiple">
                                                        <option value="-1">---Select---</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="col-md-3 tpbtmsp">
                                                <label for="causername" class="text-left number"><b>CM Temporary CL :</b></label>
                                                <input type="text" id="cmtempcllimit" placeholder="">
                                            </div>
                                            <div class="col-md-3 tpbtmsp">
                                                <div class="form-group form-grid">
                                                    <label>CR SAP User Name :</label>
                                                    <select id="ddlCRUserName" class="multiselect-ui form-control" multiple="multiple">
                                                        <option value="-1">---Select---</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="col-md-3 tpbtmsp">
                                                <label for="catempcllimit" class="text-left number"><b>CR Temporary CL :</b> </label>
                                                <input type="text" id="crtempcllimit" placeholder="">
                                            </div>
                                            <div class="row col-12 p-0" style="background: beige;">
                                                <div class="col-md-3 tpbtmsp">
                                                    <div class="form-group form-grid">
                                                        <label>HOF SAP User Name :</label>
                                                        <select id="ddlHOFUserName" class="multiselect-ui form-control" multiple="multiple">
                                                            <option value="-1">---Select---</option>
                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="col-md-3 tpbtmsp">
                                                    <label for="hoftempcllimit" class="text-left number"><b>HOF Temporary CL :</b> </label>
                                                    <input type="text" id="hoftempcllimit" placeholder="">
                                                </div>
                                                <div class="col-md-3 tpbtmsp">
                                                    <div class="form-group form-grid">
                                                        <label>HOIS SAP User Name :</label>
                                                        <select id="ddlHOISUserName" class="multiselect-ui form-control" multiple="multiple">
                                                            <option value="-1">---Select---</option>
                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="col-md-3 tpbtmsp">
                                                    <div class="form-group form-grid">
                                                        <label>COO SAP User Name :</label>
                                                        <select id="ddlCOOUserName" class="multiselect-ui form-control" multiple="multiple">
                                                            <option value="-1">---Select---</option>
                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="col-md-3 tpbtmsp">
                                                    <div class="form-group form-grid">
                                                        <label>CEO SAP User Name :</label>
                                                        <select id="ddlCEOUserName" class="multiselect-ui form-control" multiple="multiple">
                                                            <option value="-1">---Select---</option>
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                         
                                            <div class="col-md-12 tpbtmsp text-right">
                                                <input type="button" id="BtnaddCreditLimit" class="add-row btn smbtn btn-round btn-primary btn-md text-white" value="+ Add">
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                            <div class="table-responsive tblscroll">
                                <table id="tblShow" class="display table table-striped table-hover">
                                    <thead>
                                        <tr>
                                            <th style="width:150px; font-size:14px;">Action </th>
                                            <th style="width:50px; font-size:14px;">Id </th>
                                            <th style="width:100px; font-size:14px;">Country </th>
                                            <th style="width:150px; font-size:14px;">CA User Name </th>
                                            <th style="width:150px; font-size:14px;">CA temp CL Limit </th>
                                            <th style="width:150px; font-size:14px;">CM User Name </th>
                                            <th style="width:150px; font-size:14px;">CM temp CL Limit </th>
                                            <th style="width:150px; font-size:14px;">CR User Name </th>
                                            <th style="width:150px; font-size:14px;">CR temp CL Limit </th>
                                            <th style="width:150px; font-size:14px;">HOF User Name </th>
                                            <th style="width:150px; font-size:14px;">HOF temp CL Limit </th>
                                            <th style="width:150px; font-size:14px;">HOIS User Name </th>
                                            <th style="width:150px; font-size:14px;">COO User Name </th>
                                            <th style="width:150px; font-size:14px;">CEO User Name </th>

                                        </tr>
                                    </thead>
                                    <tbody>
                                       
                                    </tbody>
                                </table>                               
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="~/Scripts/jquery-3.5.1.min.js"></script>
<script src="~/Scripts/RedDotUtility.js"></script>
<script type="text/javascript">
    $(function () {
        $("input[id*='catempcllimit']").keydown(function (event) {


            if (event.shiftKey == true) {
                event.preventDefault();
            }

            if ((event.keyCode >= 48 && event.keyCode <= 57) || (event.keyCode >= 96 && event.keyCode <= 105) || event.keyCode == 8 || event.keyCode == 9 || event.keyCode == 37 || event.keyCode == 39 || event.keyCode == 46 || event.keyCode == 190) {

            } else {
                event.preventDefault();
            }

            if ($(this).val().indexOf('.') !== -1 && event.keyCode == 190)
                event.preventDefault();

        });
    });
    $(function () {
        $("input[id*='cmtempcllimit']").keydown(function (event) {


            if (event.shiftKey == true) {
                event.preventDefault();
            }

            if ((event.keyCode >= 48 && event.keyCode <= 57) || (event.keyCode >= 96 && event.keyCode <= 105) || event.keyCode == 8 || event.keyCode == 9 || event.keyCode == 37 || event.keyCode == 39 || event.keyCode == 46 || event.keyCode == 190) {

            } else {
                event.preventDefault();
            }

            if ($(this).val().indexOf('.') !== -1 && event.keyCode == 190)
                event.preventDefault();

        });
    });
    $(function () {
        $("input[id*='hoftempcllimit']").keydown(function (event) {


            if (event.shiftKey == true) {
                event.preventDefault();
            }

            if ((event.keyCode >= 48 && event.keyCode <= 57) || (event.keyCode >= 96 && event.keyCode <= 105) || event.keyCode == 8 || event.keyCode == 9 || event.keyCode == 37 || event.keyCode == 39 || event.keyCode == 46 || event.keyCode == 190) {

            } else {
                event.preventDefault();
            }

            if ($(this).val().indexOf('.') !== -1 && event.keyCode == 190)
                event.preventDefault();

        });
    });
    $(function () {
        $("input[id*='crtempcllimit']").keydown(function (event) {


            if (event.shiftKey == true) {
                event.preventDefault();
            }

            if ((event.keyCode >= 48 && event.keyCode <= 57) || (event.keyCode >= 96 && event.keyCode <= 105) || event.keyCode == 8 || event.keyCode == 9 || event.keyCode == 37 || event.keyCode == 39 || event.keyCode == 46 || event.keyCode == 190) {

            } else {
                event.preventDefault();
            }

            if ($(this).val().indexOf('.') !== -1 && event.keyCode == 190)
                event.preventDefault();

        });
    });
    function GetCAUserList(country) {
        $.ajax({
            type: "GET",
            url: '@Url.Action("GetUserList", "RDD_TempCreditLimit")',
            data: { "Country": country },
            dataType: "json",
            success: function (data) {
                debugger;
                var d = data.Table;                
                $("#ddlCAUserName").empty();
                $("#ddlCAUserName").append('<option value="-1">--Select--</option>');
                $.each(d, function (index, Value) {
                    $("#ddlCAUserName").append("<option value='" + Value.UserCode + "'>" + Value.UserName + "</option>");
                });
                $("#ddlCMUserName").empty();
                $("#ddlCMUserName").append('<option value="-1">--Select--</option>');
                $.each(d, function (index, Value) {
                    $("#ddlCMUserName").append("<option value='" + Value.UserCode + "'>" + Value.UserName + "</option>");
                });
                $("#ddlCRUserName").empty();
                $("#ddlCRUserName").append('<option value="-1">--Select--</option>');
                $.each(d, function (index, Value) {
                    $("#ddlCRUserName").append("<option value='" + Value.UserCode + "'>" + Value.UserName + "</option>");
                });
                $("#ddlHOFUserName").empty();
                $("#ddlHOFUserName").append('<option value="-1">--Select--</option>');
                $.each(d, function (index, Value) {
                    $("#ddlHOFUserName").append("<option value='" + Value.UserCode + "'>" + Value.UserName + "</option>");
                });
                $("#ddlHOISUserName").empty();
                $("#ddlHOISUserName").append('<option value="-1">--Select--</option>');
                $.each(d, function (index, Value) {
                    $("#ddlHOISUserName").append("<option value='" + Value.UserCode + "'>" + Value.UserName + "</option>");
                });
                $("#ddlCOOUserName").empty();
                $("#ddlCOOUserName").append('<option value="-1">--Select--</option>');
                $.each(d, function (index, Value) {
                    $("#ddlCOOUserName").append("<option value='" + Value.UserCode + "'>" + Value.UserName + "</option>");
                });
                $("#ddlCEOUserName").empty();
                $("#ddlCEOUserName").append('<option value="-1">--Select--</option>');
                $.each(d, function (index, Value) {
                    $("#ddlCEOUserName").append("<option value='" + Value.UserCode + "'>" + Value.UserName + "</option>");
                });
              
            }, complete: function () {
               
               // $(".multiselect-ui").fSelect('reload'); 
            }
        });
    }
    function GetCAUserListInsert(country) {
        $.ajax({
            type: "GET",
            url: '@Url.Action("GetUserList", "RDD_TempCreditLimit")',
            data: { "Country": country },
            dataType: "json",
            success: function (data) {
                var d = data.Table;
                $("#ddlCAUserName").empty();
                $("#ddlCAUserName").append('<option value="-1">--Select--</option>');
                $.each(d, function (index, Value) {
                    $("#ddlCAUserName").append("<option value='" + Value.UserCode + "'>" + Value.UserName + "</option>");
                });
                $("#ddlCMUserName").empty();
                $("#ddlCMUserName").append('<option value="-1">--Select--</option>');
                $.each(d, function (index, Value) {
                    $("#ddlCMUserName").append("<option value='" + Value.UserCode + "'>" + Value.UserName + "</option>");
                });
                $("#ddlCRUserName").empty();
                $("#ddlCRUserName").append('<option value="-1">--Select--</option>');
                $.each(d, function (index, Value) {
                    $("#ddlCRUserName").append("<option value='" + Value.UserCode + "'>" + Value.UserName + "</option>");
                });
                $("#ddlHOFUserName").empty();
                $("#ddlHOFUserName").append('<option value="-1">--Select--</option>');
                $.each(d, function (index, Value) {
                    $("#ddlHOFUserName").append("<option value='" + Value.UserCode + "'>" + Value.UserName + "</option>");
                });
                $("#ddlHOISUserName").empty();
                $("#ddlHOISUserName").append('<option value="-1">--Select--</option>');
                $.each(d, function (index, Value) {
                    $("#ddlHOISUserName").append("<option value='" + Value.UserCode + "'>" + Value.UserName + "</option>");
                });
                $("#ddlCOOUserName").empty();
                $("#ddlCOOUserName").append('<option value="-1">--Select--</option>');
                $.each(d, function (index, Value) {
                    $("#ddlCOOUserName").append("<option value='" + Value.UserCode + "'>" + Value.UserName + "</option>");
                });
                $("#ddlCEOUserName").empty();
                $("#ddlCEOUserName").append('<option value="-1">--Select--</option>');
                $.each(d, function (index, Value) {
                    $("#ddlCEOUserName").append("<option value='" + Value.UserCode + "'>" + Value.UserName + "</option>");
                });
              
            }, complete: function () {
                
                   $(".multiselect-ui").fSelect('reload');
                
                
            }
        });
    }
    function GetCreditLimitList() {
        $.ajax({
            async: false,
            cache: false,
            type: "Post",
            url: '@Url.Action("GetCreditLimitDetails", "RDD_TempCreditLimit")',
            dataType: 'Json',
            contentType: "Application/json",
            success: function (data) {
                $("#tblShow tbody").empty();
                //$("#tblShow").dataTable.fnDestroy();
                if (data.Table.length > 0) {
                    $.each(data.Table, function (index, value) {
                        $("#tblShow tbody").append('<tr><td>' + '<button type="button" class="btn btn-primary btn-lg edit" style="font-size:14px;padding:8px 10px">Edit</button>' + '</td><td>' + value.Id + '</td><td>' + value.Country + '</td><td>' + value.CAUserName + '</td><td>' + value.CAtempCLLimit + '</td><td>' + value.CMUserName + '</td><td>' + value.CMtempCLLimit + '</td><td>' + value.CRUserName + '</td><td>' + value.CRtempCLLimit + '</td><td>'
                            + value.HOFUserName + '</td><td>' + value.HOFtempCLLimit + '</td><td>' + value.HOISUserName + '</td><td>' + value.COOUserName + '</td><td>' + value.CEOUserName + '</td></tr>');

                    });
                    $("#tblShow").DataTable();

                }
                else {
                    $("#tblShow tbody").append('<tr><td style="text-align:center" colspan=20>No Record Found</td></tr>')
                }
            }
        });
    }
   
   
     function GetCountryList() {
        $.ajax({
            type: "GET",
            url: '@Url.Action("GetCountryList", "RDD_TempCreditLimit")',
            dataType: "json",
            success: function (data) {
                var d = data.Table;
                $("#ddlCountry").empty();
                $("#ddlCountry").append('<option value="-1">--Select--</option>');
                $.each(d, function (index, Value) {
                    $("#ddlCountry").append("<option value='" + Value.CountryCode + "'>" + Value.CountryCode + "</option>");
                });

            }
        });
     }
    function getSelectedvalue(User, ddlUserName) {
        var valarr = User.split(';');        
        (function ($) {
            $(function () {

                $("#" + ddlUserName + ".fs-wrap").find('.fs-dropdown').find('.g0').removeClass('selected');
                i = 0, size = valarr.length;
                for (i; i < size; i++) {
                    $("#" + ddlUserName + ".fs-wrap").find('.fs-dropdown').find("[data-value='" + valarr[i].trim() + "']").addClass('selected');
                }
                if (size > 2) {
                    $("#" + ddlUserName + ".fs-label").text(size - 1 + ' selected');
                }
                $("#" + ddlUserName + "").val(valarr);
                $("#" + ddlUserName + "").fSelect('reload');
            });
        })(jQuery);
       
    }
   
    $(document).ready(function () {
        $('.loader1').show();

        (function ($) {
            $(function () {
                window.fs_test = $('.multiselect-ui').fSelect();
                $(".multiselect-ui").hide();
            });
        })(jQuery);
        GetCreditLimitList();
        GetCountryList();
        $('.loader1').hide();
        $('#ddlCountry').on('change', function () {
            var country = $(this).val();

            GetCAUserListInsert(country);

        });


       
    });
    $(document).on('click', '.edit',function () {
        $("#ddlCountry").prop("disabled", true);
        $("#hdnCLId").val($(this).closest("tr").find("td:eq(1)").html());
        $("#BtnaddCreditLimit").prop("value", "+Update");
        $("#BtnaddCreditLimit").attr("id", "BtnUpdtCreditLimit");
        // $('.multiselect-ui').fSelect('destroy');
        var country = $(this).closest("tr").find("td:eq(2)").html();
        // GetCAUserList(country);
        var catempcllimit = $(this).closest("tr").find("td:eq(4)").html();
        var cmtempcllimit = $(this).closest("tr").find("td:eq(6)").html();
        var crtempcllimit = $(this).closest("tr").find("td:eq(8)").html();
        var hoftempcllimit = $(this).closest("tr").find("td:eq(10)").html();
        $("#ddlCountry").val(country);
        $("#catempcllimit").val(catempcllimit);
        $("#cmtempcllimit").val(cmtempcllimit);
        $("#crtempcllimit").val(crtempcllimit);
        $("#hoftempcllimit").val(hoftempcllimit);
        var CAUser = $(this).closest("tr").find("td:eq(3)").html();
        var CMUser = $(this).closest("tr").find("td:eq(5)").html();
        var CRUser = $(this).closest("tr").find("td:eq(7)").html();
        var HOFUser = $(this).closest("tr").find("td:eq(9)").html();
        var HOISUser = $(this).closest("tr").find("td:eq(11)").html();
        var COOUser = $(this).closest("tr").find("td:eq(12)").html();
        var CEOUser = $(this).closest("tr").find("td:eq(13)").html();
        (function ($) {
            $(function () {
                window.fs_test = $('.multiselect-ui').fSelect();
                $(".multiselect-ui").hide();
            });
        })(jQuery);
        $.ajax({
            type: "GET",
            url: '@Url.Action("GetUserList", "RDD_TempCreditLimit")',
            data: { "Country": country },
            dataType: "json",
            success: function (data) {
                $("#ddlCountry").attr("disabled", true);
                $('#ddlCAUserName')
                    .find('option')
                    .remove()
                    .end()
                $('#ddlCMUserName')
                    .find('option')
                    .remove()
                    .end()
                $('#ddlCRUserName')
                    .find('option')
                    .remove()
                    .end()
                $('#ddlHOFUserName')
                    .find('option')
                    .remove()
                    .end()
                $('#ddlHOISUserName')
                    .find('option')
                    .remove()
                    .end()
                $('#ddlCOOUserName')
                    .find('option')
                    .remove()
                    .end()
                $('#ddlCEOUserName')
                    .find('option')
                    .remove()
                    .end()
                var d = data.Table;
                $("#ddlCAUserName").empty();
                $("#ddlCAUserName").append('<option value="-1">--Select--</option>');
                $.each(d, function (index, Value) {
                    $("#ddlCAUserName").append("<option value='" + Value.UserCode + "'>" + Value.UserName + "</option>");
                });
                $("#ddlCMUserName").empty();
                $("#ddlCMUserName").append('<option value="-1">--Select--</option>');
                $.each(d, function (index, Value) {
                    $("#ddlCMUserName").append("<option value='" + Value.UserCode + "'>" + Value.UserName + "</option>");
                });
                $("#ddlCRUserName").empty();
                $("#ddlCRUserName").append('<option value="-1">--Select--</option>');
                $.each(d, function (index, Value) {
                    $("#ddlCRUserName").append("<option value='" + Value.UserCode + "'>" + Value.UserName + "</option>");
                });
                $("#ddlHOFUserName").empty();
                $("#ddlHOFUserName").append('<option value="-1">--Select--</option>');
                $.each(d, function (index, Value) {
                    $("#ddlHOFUserName").append("<option value='" + Value.UserCode + "'>" + Value.UserName + "</option>");
                });
                $("#ddlHOISUserName").empty();
                $("#ddlHOISUserName").append('<option value="-1">--Select--</option>');
                $.each(d, function (index, Value) {
                    $("#ddlHOISUserName").append("<option value='" + Value.UserCode + "'>" + Value.UserName + "</option>");
                });
                $("#ddlCOOUserName").empty();
                $("#ddlCOOUserName").append('<option value="-1">--Select--</option>');
                $.each(d, function (index, Value) {
                    $("#ddlCOOUserName").append("<option value='" + Value.UserCode + "'>" + Value.UserName + "</option>");
                });
                $("#ddlCEOUserName").empty();
                $("#ddlCEOUserName").append('<option value="-1">--Select--</option>');
                $.each(d, function (index, Value) {
                    $("#ddlCEOUserName").append("<option value='" + Value.UserCode + "'>" + Value.UserName + "</option>");
                });
                var valarr1 = CAUser.split(';');

                (function ($) {
                    $(function () {
                        window.fs_test = $('.multiselect-ui').fSelect();
                        $("#ddlCAUserName .fs-wrap").find('.fs-dropdown').find('.g0').removeClass('selected');

                        i = 0, size = valarr1.length;
                        for (i; i < size; i++) {
                            $("#ddlCAUserName .fs-wrap").find('.fs-dropdown').find("[data-value='" + valarr1[i].trim() + "']").addClass('selected');
                        }
                        if (size > 2) {
                            $("#ddlCAUserName .fs-label").val(size - 1 + ' selected');
                        }
                        $("#ddlCAUserName").val(valarr1);
                        var valarr2 = CMUser.split(';');

                        i = 0, size = valarr2.length;
                        for (i; i < size; i++) {
                            $("#ddlCMUserName .fs-wrap").find('.fs-dropdown').find("[data-value='" + valarr2[i].trim() + "']").addClass('selected');
                        }
                        if (size > 2) {
                            $("#ddlCMUserName  .fs-label").val(size - 1 + ' selected');
                        }
                        $("#ddlCMUserName ").val(valarr2);
                        var valarr3 = CRUser.split(';');

                        i = 0, size = valarr3.length;
                        for (i; i < size; i++) {
                            $("#ddlCRUserName .fs-wrap").find('.fs-dropdown').find("[data-value='" + valarr3[i].trim() + "']").addClass('selected');
                        }
                        if (size > 2) {
                            $("#ddlCRUserName  .fs-label").val(size - 1 + ' selected');
                        }
                        $("#ddlCRUserName ").val(valarr3);
                        var valarr4 = HOFUser.split(';');

                        i = 0, size = valarr4.length;
                        for (i; i < size; i++) {
                            $("#ddlHOFUserName .fs-wrap").find('.fs-dropdown').find("[data-value='" + valarr4[i].trim() + "']").addClass('selected');
                        }
                        if (size > 2) {
                            $("#ddlHOFUserName  .fs-label").val(size - 1 + ' selected');
                        }
                        $("#ddlHOFUserName ").val(valarr4);
                        var valarr5 = HOISUser.split(';');

                        i = 0, size = valarr5.length;
                        for (i; i < size; i++) {
                            $("#ddlHOISUserName .fs-wrap").find('.fs-dropdown').find("[data-value='" + valarr5[i].trim() + "']").addClass('selected');
                        }
                        if (size > 2) {
                            $("#ddlHOISUserName  .fs-label").val(size - 1 + ' selected');
                        }
                        $("#ddlHOISUserName ").val(valarr5);
                        var valarr6 = COOUser.split(';');

                        i = 0, size = valarr6.length;
                        for (i; i < size; i++) {
                            $("#ddlCOOUserName .fs-wrap").find('.fs-dropdown').find("[data-value='" + valarr6[i].trim() + "']").addClass('selected');
                        }
                        if (size > 2) {
                            $("#ddlCOOUserName  .fs-label").val(size - 1 + ' selected');
                        }
                        $("#ddlCOOUserName ").val(valarr6);
                        var valarr7 = CEOUser.split(';');

                        i = 0, size = valarr7.length;
                        for (i; i < size; i++) {
                            $("#ddlCEOUserName .fs-wrap").find('.fs-dropdown').find("[data-value='" + valarr7[i].trim() + "']").addClass('selected');
                        }
                        if (size > 2) {
                            $("#ddlCEOUserName  .fs-label").val(size - 1 + ' selected');
                        }
                        $("#ddlCEOUserName ").val(valarr7);

                        $(".multiselect-ui").fSelect('reload');
                    });
                })(jQuery);

            }, complete: function () {
                $(".multiselect-ui").hide();
                $(".multiselect-ui").fSelect('reload');
            }
        });
    });
            
             

    $(document).on('click', '#BtnaddCreditLimit', function () {
        $('.loader1').show();
        var d0 = $("#ddlCountry option:selected").val();
        if (d0 == "-1" || d0 == undefined) {
            RedDotAlert_Error("Please Select Country");
            $(".loader1").hide();
            return false;
        }
       
        var CAUserName = "";
        var CRUserName = "";
        var CMUserName = "";
        var HOFUserName = "";
        var HOISUserName = "";
        var COOUserName = "";
        var CEOUserName = "";
        $("#ddlCAUserName option:selected").each(function () {
            CAUserName += $(this).val() + ";";
        });
        $("#ddlCRUserName option:selected").each(function () {
            CRUserName += $(this).val() + ";";
        });
        $("#ddlCMUserName option:selected").each(function () {
            CMUserName += $(this).val() + ";";
        });
        $("#ddlHOFUserName option:selected").each(function () {
            HOFUserName += $(this).val() + ";";
        });
        $("#ddlHOISUserName option:selected").each(function () {
            HOISUserName += $(this).val() + ";";
        });
        $("#ddlCOOUserName option:selected").each(function () {
            COOUserName += $(this).val() + ";";
        });
        $("#ddlCEOUserName option:selected").each(function () {
            CEOUserName += $(this).val() + ";";
        });
        var rDD_TempCreditLimit = {
            Country: $("#ddlCountry option:selected").val(),
            CAtempCLLimit: $("#catempcllimit").val(),
            CMtempCLLimit: $("#cmtempcllimit").val(),
            CRtempCLLimit: $("#crtempcllimit").val(),
            HOFtempCLLimit: $("#hoftempcllimit").val(),
            CAUserName: CAUserName,
            CRUserName: CRUserName,
            CMUserName: CMUserName,
            HOFUserName: HOFUserName,
            HOISUserName: HOISUserName,
            COOUserName: COOUserName,
            CEOUserName: CEOUserName
        };
        $.ajax({
            type: "POST",
            async: false,
            cache: false,
            url: "/SaveTempCL",
           // contentType: "application/json; charset=utf-8",
            contentType: "application/json",
            dataType: "json",
            data: JSON.stringify({ rDD_TempCreditLimit: rDD_TempCreditLimit }),            
            success: function (data) {
                GetCreditLimitList();
                GetCountryList();
                $('.loader1').hide();
                if (data.Saveflag == true) {
                    RedDotAlert_Success(data.ErrorMsg);
                    $("#catempcllimit").val("");
                    $("#cmtempcllimit").val("");
                    $("#crtempcllimit").val("");
                    $("#hoftempcllimit").val("");
                    //$("#ddlCEOUserName").val('Select some options');
                    
                }

                else {
                    RedDotAlert_Error(data.ErrorMsg);
                }
            }, error: function (e) {
               
                console.log(e);
            }, complete: function () {
                $("#ddlCountry").trigger('change');               
                $('.multiselect-ui')
                    .find('option')
                    .remove()
                    .end()
                $(".multiselect-ui").hide();
                $(".multiselect-ui").fSelect('reload');
            }
        });
    });
      
   
   
    $(document).on('click','#BtnUpdtCreditLimit',function () {
          $('.loader1').show();
        var d0 = $("#ddlCountry option:selected").val();
        if (d0 == "-1" || d0 == undefined) {
            RedDotAlert_Error("Please Select Country");
            $(".loader1").hide();
            return false;
        } 
       
        var CAUserName = ""; 
        var CRUserName = "";
        var CMUserName = "";
        var HOFUserName = "";
        var HOISUserName = "";
        var COOUserName = "";
        var CEOUserName = "";
        $("#ddlCAUserName option:selected").each(function () {
            CAUserName += $(this).val() + ";";
        });
        $("#ddlCRUserName option:selected").each(function () {
            CRUserName += $(this).val() + ";";
        });
        $("#ddlCMUserName option:selected").each(function () {
            CMUserName += $(this).val() + ";";
        });
        $("#ddlHOFUserName option:selected").each(function () {
            HOFUserName += $(this).val() + ";";
        });
        $("#ddlHOISUserName option:selected").each(function () {
            HOISUserName += $(this).val() + ";";
        });
        $("#ddlCOOUserName option:selected").each(function () {
            COOUserName += $(this).val() + ";";
        });
        $("#ddlCEOUserName option:selected").each(function () {
            CEOUserName += $(this).val() + ";";
        });
        var rDD_TempCreditLimit = {
            country: $("#ddlCountry option:selected").val(),
            CATempClLimit: $("#catempcllimit").val(),
            CMTempClLimit: $("#cmtempcllimit").val(),
            CRTempClLimit: $("#crtempcllimit").val(),
            HOFtempCLLimit: $("#hoftempcllimit").val(),
            CAUserName: CAUserName,
            CRUserName: CRUserName,
            CMUserName: CMUserName,
            HOFUserName: HOFUserName,
            HOISUserName: HOISUserName,
            COOUserName: COOUserName,
            CEOUserName: CEOUserName,
            Id: $("#hdnCLId").val(),
            Editflag:true
        };
        $.ajax({
            type: "POST",
            async: false,
            cache: false,
            url: "/SaveTempCL",
           // contentType: "application/json; charset=utf-8",
            contentType: "application/json",
            dataType: "json",
            data: JSON.stringify({ rDD_TempCreditLimit: rDD_TempCreditLimit }),            
            success: function (data) {
                $("#ddlCountry").removeAttr("disabled", true);
                GetCreditLimitList();
                GetCountryList();
                $('.loader1').hide();
                if (data.Saveflag == true) {
                    RedDotAlert_Success(data.ErrorMsg);
                    $("#BtnUpdtCreditLimit").prop("value", "+Add");
                    $("#BtnUpdtCreditLimit").attr("id", "BtnaddCreditLimit");
                    $("#catempcllimit").val("");
                    $("#cmtempcllimit").val("");
                    $("#crtempcllimit").val("");
                    $("#hoftempcllimit").val("");
                   // $("#ddlCEOUserName").val('Select some options');
                }
                else {
                    RedDotAlert_Error(data.ErrorMsg);
                }
            }, error: function (e) {

                console.log(e);
            } , complete: function () {
                $("#ddlCountry").trigger('change');
                $('.multiselect-ui')
                    .find('option')
                    .remove()
                    .end()
                $(".multiselect-ui").hide();
                $(".multiselect-ui").fSelect('reload');
            }
        });

    });

</script>






