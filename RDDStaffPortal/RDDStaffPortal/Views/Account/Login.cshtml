@model  RDDStaffPortal.Models.Login
@{
    Layout = null;
}
@using System.Web.Optimization;

<html lang="en">
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>Red Dot Distribution :: Technology with a Difference</title>
    <meta content='width=device-width, initial-scale=1.0, shrink-to-fit=no' name='viewport' />
    <link rel="icon" href="~/img/reddot.ico" type="image/x-icon" />

    <!-- Fonts and icons -->
    @*<script src="~/js/plugin/webfont/webfont.min.js"></script>
    <script src="~/js/jquery-1.2.6.min.js"></script>*@
    @Scripts.Render("~/JS/LoginHeaderJs");
    <script type="text/javascript">

        function slideSwitch() {
            var $active = $('#slideshow IMG.active');

            if ($active.length == 0) $active = $('#slideshow IMG:last');

            // use this to pull the images in the order they appear in the markup
            var $next = $active.next().length ? $active.next()
                : $('#slideshow IMG:first');

            // uncomment the 3 lines below to pull the images in random order

            // var $sibs  = $active.siblings();
            // var rndNum = Math.floor(Math.random() * $sibs.length );
            // var $next  = $( $sibs[ rndNum ] );
            $active.addClass('last-active');

            $next.css({ opacity: 0.0 })
                .addClass('active')
                .animate({ opacity: 1.0 }, 1500, function () {
                    $active.removeClass('active last-active');
                });
        }

        $(function () {
           // setInterval("slideSwitch()", 2000);
        });

    </script>

    @Styles.Render("~/CSS/logincss");
    <!-- CSS Files -->
    @*<link href="~/Content/bootstrap.min.css" rel="stylesheet" />
    <link href="~/Content/atlantis.min.css" rel="stylesheet" />
    <link href="~/Content/fonts.min.css" rel="stylesheet" />*@

    <!-- CSS Just for demo purpose, don't include it in your project -->
    @*<link href="~/Content/reddot.css" rel="stylesheet" />*@
</head>

<body>

    @using (Html.BeginForm())
    {
        @Html.AntiForgeryToken()


        <div class="container">

            <!-- Outer Row -->
            <div class="row justify-content-center login-section mar-t100" id="Loginbox">

                <div class="col-xl-5 col-lg-6 col-md-9">
                    <h1 class="h4 text-gray-900 padd-l30 padd-r30 padd-t30 padd-b10 text-center"><img src="~/img/reddot-logo.png" alt="#"></h1>

                    <div class="card o-hidden border-0 shadow-lg my-3 login-bg" style="margin-top: 28% !important;">
                        <div class="row">
                            <div class="col-lg-12">
                                <div class="loader1"></div>
                                <div class="padd-20">
                                    <div class="text-center">

                                        <p class="mar-0">Technology with a Difference</p>
                                        <p>Africa's No.1 IT Distribution Company</p>
                                    </div>
                                    @Html.ValidationSummary(true, "", new { @class = "text-danger" })
                                    <form class="user" autocomplete="off">
                                        <div class="form-group has-error" id="divUser">
                                            <div class="input-group">
                                                @Html.EditorFor(model => model.UserName, new { htmlAttributes = new { @class = "form-control form-control-user", placeholder = "UserName or Email address" } })
                                                @Html.ValidationMessageFor(model => model.UserName, "", new { @class = "text-danger" })
                                                <div class="input-group-append">
                                                    <span class="input-group-text"><i class="fas fa-user-alt"></i></span>
                                                </div>
                                            </div>
                                            <!--<small id="emailHelp" class="form-text text-muted">Please provide a valid informations.</small>-->
                                        </div>
                                        <div class="form-group has-error" id="divPass">
                                            <div class="input-group">
                                                @*<input type="text" class="form-control" placeholder="Password" aria-label="Recipient's username">*@
                                                @Html.PasswordFor(model => model.UserPassword, new { @class = "form-control form-control-user", placeholder = "Password" })
                                                @Html.ValidationMessageFor(model => model.UserPassword, "", new { @class = "text-danger" })
                                                <div class="input-group-append">
                                                    <span class="input-group-text"><i class="fas fa-lock"></i></span>
                                                </div>
                                            </div>
                                            <!--<small id="emailHelp" class="form-text text-muted">Please provide a valid informations.</small>-->
                                        </div>
                                        <div class="row">
                                            <div class="col-xl-6 col-lg-6 col-md-12 mar-t10 text-left">
                                                @*<a href="#" class="btn btn-primary login-btn"> Login </a>*@
                                                <input type="submit" class="btn btn-primary login-btn" value="Login" />
                                            </div>
                                            <div class="col-xl-6 col-lg-6 col-md-12 mar-t20 text-right"> <a href="#" class="link text-right" id="ForgetPassword">Forgot Password ?</a></div>
                                        </div>
                                        @*<div class="text-center padd-t30">
                                                Don't have an account? <a class="small" href="register.html">Register</a>
                                            </div>*@
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row justify-content-center login-section mar-t100" id="ForgetPasswordbox" style="display:none">
                <div class="col-xl-5 col-lg-6 col-md-9">
                    <h1 class="h4 text-gray-900 padd-l30 padd-r30 padd-t30 padd-b10 text-center"><img src="~/img/reddot-logo.png" alt="#"></h1>

                    <div class="card o-hidden border-0 shadow-lg my-3 login-bg">
                        <div class="row">
                            <div class="col-lg-12">
                                <div class="padd-20">
                                    <div class="text-center">
                                        <p class="mar-0">Forgot your password ?</p>
                                        <p>Let's get new one.</p>
                                    </div>
                                    <form class="user">
                                        <div class="form-group has-error">
                                            <div class="input-group">
                                                <input type="text" class="form-control" id="emailid" placeholder="Enter your Email ID" aria-label="Email ID">
                                                <div class="input-group-append">
                                                    <span class="input-group-text"><i class="fas fa-envelope"></i></span>
                                                </div>

                                            </div>
                                            <small id="emailHelp" class="form-text text-danger"></small>
                                            <!--<small id="emailHelp" class="form-text text-muted">Please provide a valid informations.</small>-->
                                        </div>

                                        <div class="row">
                                            <div class="col-xl-6 col-lg-6 col-md-12 mar-t10 text-left">
                                                @*<a href="#" class="btn btn-primary login-btn"> Login </a>*@
                                                <button type="button" class="btn btn-primary login-btn" id="SendEmail"> RESET PASSWORD </button>
                                            </div>
                                            <div class="col-xl-6 col-lg-6 col-md-12 mar-t20 text-right"> <a href="/account/login" class="link text-right" id="ForgetPassword">GO TO LOGIN </a></div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="slideshow">
            <img src="#" alt="" class="active" />
            <img src="#" alt="" />
            <img src="#" alt="" />

        </div>

        @Scripts.Render("~/JS/LoginFooterJs");
        @*<script src="~/js/core/jquery.3.2.1.min.js"></script>
        <script src="~/Scripts/sweetalret/sweetalert2.all.min.js"></script>
        <script src="~/Scripts/RedDotUtility.js"></script>*@

        <script>
            $(".loader1").hide();
            $("#ForgetPassword").click(function () {
                $("#Loginbox").hide();
                $("#ForgetPasswordbox").show();
            });
            $("#ForgetPassword").click(function () {
                //$("#Loginbox").show();
                //$("#ForgetPasswordbox").hide();
            })
            $(document).ready(function () {
                var t = true;
                $("#emailHelp").text('');
                $("#emailid").blur(function () {
                    var testEmail = /^[A-Z0-9._%+-]+@@([A-Z0-9-]+\.)+[A-Z]{2,4}$/i;
                    if (testEmail.test(this.value)) {
                        $("#emailHelp").text('');
                        t = false;
                    }
                    else {
                        $("#emailHelp").text('Enter Valid Email Id');
                        t = true;
                    }
                });
                $("#SendEmail").click(function () {
                    if (t == true) {
                        RedDotAlert_Error('Enter Valid Email Id');
                        return
                    }
                    $(".loader1").show();
                    $("#SendEmail").attr('disabled', true);
                    $.getJSON("/ForgetPas", { email: $("#emailid").val() }, function (response) {
                        debugger
                        if (response.Success == true) {
                            RedDotAlert_Success('Well done! Check your email to reset your password.');
                         @*var newUrl= '@Url.Action("Login", "Account")';
                        window.location.href = newUrl;*@
                            $("#emailid").val('');
                            $(".loader1").hide();

                        } else {
                            $(".loader1").hide();
                            RedDotAlert_Error(response.Message);

                        }
                        $("#SendEmail").attr('disabled', false);

                    })

                });

                $("input[id='UserName']").on("blur", function (e) {
                    debugger
                    $('#divUser').removeClass('has-error').addClass('has-success');
                })
                $("input[id='UserPassword']").on("blur", function (e) {
                    debugger
                    $('#divPass').removeClass('has-error').addClass('has-success');
                })
                

            })


            
        </script>

    }
</body>
</html>
